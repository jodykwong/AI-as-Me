# Architecture: AI-as-Me v3.4.3

**ç‰ˆæœ¬**: v3.4.3  
**ä¸»é¢˜**: ç»Ÿä¸€ Dashboard + Vibe-Kanban

---

## 1. ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Web Dashboard (ç»Ÿä¸€å…¥å£)                   â”‚
â”‚  http://localhost:8000                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  /              â”‚ /kanban.html â”‚ /soul.html â”‚ å…¶ä»–é¡µé¢...    â”‚
â”‚  é¦–é¡µæ¦‚è§ˆ        â”‚ Kanbançœ‹æ¿    â”‚ SoulçŠ¶æ€   â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    FastAPI (dashboard/app.py)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /api/    â”‚ /api/    â”‚ /api/    â”‚ /api/    â”‚ /api/           â”‚
â”‚ kanban/* â”‚ inspire* â”‚ rules/*  â”‚ soul/*   â”‚ stats/*         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚           â”‚          â”‚          â”‚           
      â–¼           â–¼          â–¼          â–¼           
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” 
â”‚ kanban/  â”‚ â”‚ soul/   â”‚ â”‚ soul/  â”‚ â”‚ soul/  â”‚ 
â”‚ *.md     â”‚ â”‚ inspir* â”‚ â”‚ rules/ â”‚ â”‚ *.md   â”‚ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
```

---

## 2. ç›®å½•ç»“æ„

```
AI-as-Me/
â”œâ”€â”€ src/ai_as_me/
â”‚   â”œâ”€â”€ dashboard/              # ç»Ÿä¸€ Web æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ app.py             # FastAPI ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ kanban.py      # [æ–°å¢] Kanban API
â”‚   â”‚   â”‚   â”œâ”€â”€ soul.py        # [æ–°å¢] Soul API
â”‚   â”‚   â”‚   â”œâ”€â”€ inspirations.py
â”‚   â”‚   â”‚   â”œâ”€â”€ rules.py
â”‚   â”‚   â”‚   â”œâ”€â”€ stats.py
â”‚   â”‚   â”‚   â””â”€â”€ logs.py
â”‚   â”‚   â””â”€â”€ static/
â”‚   â”‚       â”œâ”€â”€ index.html     # [é‡æ„] ç»Ÿä¸€é¦–é¡µ
â”‚   â”‚       â”œâ”€â”€ kanban.html    # [æ–°å¢] Kanban çœ‹æ¿
â”‚   â”‚       â”œâ”€â”€ soul.html      # [æ–°å¢] Soul çŠ¶æ€
â”‚   â”‚       â”œâ”€â”€ js/
â”‚   â”‚       â”‚   â”œâ”€â”€ kanban.js  # [æ–°å¢]
â”‚   â”‚       â”‚   â””â”€â”€ soul.js    # [æ–°å¢]
â”‚   â”‚       â””â”€â”€ css/
â”‚   â”‚           â””â”€â”€ style.css  # [æ›´æ–°]
â”‚   â””â”€â”€ kanban/
â”‚       â”œâ”€â”€ vibe_manager.py    # [æ–°å¢] Markdown æ–‡ä»¶ç®¡ç†
â”‚       â””â”€â”€ models.py          # [æ–°å¢] ä»»åŠ¡æ¨¡å‹
â”œâ”€â”€ kanban/                     # ä»»åŠ¡æ–‡ä»¶å­˜å‚¨
â”‚   â”œâ”€â”€ inbox/
â”‚   â”œâ”€â”€ todo/
â”‚   â”œâ”€â”€ doing/
â”‚   â””â”€â”€ done/
â””â”€â”€ soul/
    â”œâ”€â”€ profile.md
    â”œâ”€â”€ mission.md
    â””â”€â”€ rules/
```

---

## 3. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 3.1 Task æ¨¡å‹ (kanban/models.py)

```python
class TaskStatus(Enum):
    INBOX = "inbox"
    TODO = "todo"
    DOING = "doing"
    DONE = "done"

class Task(BaseModel):
    id: str
    title: str
    description: str
    status: TaskStatus
    priority: str  # P1/P2/P3
    clarified: bool
    clarification: TaskClarification
    created_at: datetime
    updated_at: datetime
    
    def to_markdown() -> str
    def from_markdown(content: str) -> Task
```

### 3.2 VibeKanbanManager (kanban/vibe_manager.py)

```python
class VibeKanbanManager:
    def __init__(self, kanban_dir: Path)
    
    # CRUD
    def create_task(description: str, priority: str) -> Task
    def get_task(task_id: str) -> Task
    def list_tasks(status: str = None) -> List[Task]
    def delete_task(task_id: str) -> bool
    
    # æ¾„æ¸…
    def clarify_task(task_id: str, clarification: dict) -> Task
    
    # çŠ¶æ€æµè½¬
    def move_task(task_id: str, to_status: str) -> Task
    
    # çœ‹æ¿
    def get_board() -> dict  # {inbox: [], todo: [], ...}
```

---

## 4. API è®¾è®¡

### 4.1 Kanban API (/api/kanban/*)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | è¯·æ±‚ä½“ |
|------|------|------|--------|
| GET | /board | è·å–çœ‹æ¿ | - |
| GET | /tasks/{id} | è·å–ä»»åŠ¡ | - |
| POST | /tasks | åˆ›å»ºä»»åŠ¡ | {description, priority} |
| PUT | /tasks/{id}/clarify | æ¾„æ¸…ä»»åŠ¡ | {goal, criteria, ...} |
| PUT | /tasks/{id}/move | ç§»åŠ¨ä»»åŠ¡ | {to_status} |
| DELETE | /tasks/{id} | åˆ é™¤ä»»åŠ¡ | - |

### 4.2 Soul API (/api/soul/*)

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /status | è·å–å®Œæ•´çŠ¶æ€ |
| GET | /profile | è·å– profile |
| GET | /mission | è·å– mission |

---

## 5. ä»»åŠ¡æ–‡ä»¶æ ¼å¼

### 5.1 æ–‡ä»¶è·¯å¾„
```
kanban/{status}/{task-id}.md
```

### 5.2 æ–‡ä»¶å†…å®¹
```markdown
---
id: task-20260117-001
created: 2026-01-17T06:48:00
updated: 2026-01-17T07:00:00
status: inbox
priority: P2
clarified: false
---

# ä»»åŠ¡æ ‡é¢˜

## ğŸ“ æè¿°
ç”¨æˆ·è¾“å…¥çš„åŸå§‹ä»»åŠ¡æè¿°

## ğŸ¯ ç›®æ ‡
[å¾…æ¾„æ¸…]

## âœ… éªŒæ”¶æ ‡å‡†
- [ ] å¾…å®šä¹‰

## ğŸ”§ å·¥å…·é€‰æ‹©
[å¾…é…ç½®]

## â±ï¸ æ—¶é—´ä¼°ç®—
[å¾…è¯„ä¼°]

## ğŸ“ ä¸Šä¸‹æ–‡
[æ— ]
```

---

## 6. çŠ¶æ€æµè½¬è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  inbox  â”‚ â—„â”€â”€â”€ æ–°å»ºä»»åŠ¡
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚ clarify (clarified=true)
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  todo   â”‚ â—„â”€â”€â”€ å¯å›é€€
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚ start
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  doing  â”‚ â—„â”€â”€â”€ å¯å›é€€åˆ° todo
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚ complete
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  done   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è§„åˆ™
- inbox â†’ todo: å¿…é¡» clarified=true
- todo â†’ doing: æ— é™åˆ¶
- doing â†’ done: æ— é™åˆ¶
- doing â†’ todo: å…è®¸
- todo â†’ inbox: å…è®¸

---

## 7. æŠ€æœ¯æ ˆ

- **åç«¯**: FastAPI + Pydantic
- **å‰ç«¯**: HTMX + Alpine.js
- **æ ·å¼**: TailwindCSS (CDN)
- **å­˜å‚¨**: Markdown æ–‡ä»¶ (YAML frontmatter)
- **è§£æ**: æ­£åˆ™è¡¨è¾¾å¼ (æ— é¢å¤–ä¾èµ–)
