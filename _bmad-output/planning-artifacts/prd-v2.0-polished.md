---
stepsCompleted: ["step-01-init", "step-02-discovery", "step-03-success", "step-04-journeys", "step-05-domain", "step-06-innovation", "step-07-project-type", "step-08-scoping", "step-09-functional", "step-10-nonfunctional", "step-11-polish"]
inputDocuments:
  - "product-brief-AI-as-Me-2026-01-13.md"
  - "v2.0_iteration_plan.md"
  - "v2.0_workflows.md"
  - "architecture.md"
  - "project-context.md"
documentCounts:
  briefs: 1
  research: 0
  projectDocs: 4
  projectContext: 1
workflowType: 'prd'
---

# Product Requirements Document - AI-as-Me v2.0

**Author:** Jody  
**Date:** 2026-01-13  
**Version:** 2.0 MVP

---

## 1. 产品概述

### 1.1 产品愿景
AI-as-Me v2.0 是一个开源的自进化 AI 数字分身系统，专为技术型创业者打造真正能"替你打工"的智能伙伴。

### 1.2 核心价值主张
从"每次都要重新解释"到"AI 真正懂我"，通过自进化循环让数字分身成为你的长期伙伴而非一次性工具。

### 1.3 目标用户
- **主要用户**: 技术型独立 AI 创业者（如 Jody）
- **用户特征**: 需要高效 AI 协作，追求结果可直接使用（>80% 采用率）

---

## 2. 技术架构

### 2.1 核心设计理念
**"不造轮子，只做编排"** - AI-as-Me 不实现 AI coding 能力，而是调度现有成熟的 Agent CLI 工具。

### 2.2 三层架构
1. **AI-as-Me** (调度层) → 任务分发和 Soul 注入
2. **Agent CLI** (执行层) → 外部工具执行任务  
3. **Agentic RAG** (反思层) → 经验学习和优化

### 2.3 文件结构
```
src/ai_as_me/
├── orchestrator/ (agent_cli.py, scheduler.py, soul_injector.py)
├── yangu/ (reflector.py, rule_extractor.py)
├── rag/ (vectorstore.py, retriever.py)
└── kanban/ (database.py, dashboard.py)
```

---

## 3. 成功指标 (MVP - 个人验证)

### 3.1 核心验证指标
- **个人采用率**: >80% (Jody 个人输出内容可直接使用)
- **任务完成质量**: 首次输出满意度 >75%
- **工作效率**: 重复解释时间减少 >50%

### 3.2 技术验证指标
- **系统稳定性**: 任务响应时间 <30秒，Agent CLI 集成成功率 >95%
- **功能完整性**: P0 功能全部可用，Soul 注入机制有效

### 3.3 产品验证指标
- **自进化效果**: AI 分身个性化准确度随使用提升
- **差异化验证**: 相比现有 AI 工具，减少重复解释 >70%

---

## 4. 用户旅程 (MVP - Jody 个人验证)

### 4.1 主要用户画像
**Jody - 技术型独立 AI 创业者**
- **背景**: 深度技术背景，独立开发多个 AI 项目
- **痛点**: 每次使用 AI 工具都需要重新解释需求和偏好
- **需求**: 需要一个真正"懂我"的 AI 伙伴，能持续学习和进化

### 4.2 核心使用旅程

#### 旅程1：初次设置和 Soul 注入
1. 运行 `ai-as-me setup` 进行初始配置
2. 通过 Soul 注入系统导入个人偏好和工作风格
3. 配置 Agent CLI 集成（OpenCode, Claude Code 等）
4. 完成首次"养蛊"基线建立

**关键时刻**: AI 分身成功理解 Jody 的编程风格和项目偏好

#### 旅程2：日常任务执行和学习循环
1. 使用 `ai-as-me task add "创建新的 API 接口"` 添加任务
2. AI 分身通过 Agent CLI 编排执行任务
3. 利用 Agentic RAG 检索相关历史经验
4. 生成符合 Jody 风格的代码和文档
5. 养蛊系统记录反馈，更新个人偏好模型

**关键时刻**: 输出结果 >80% 可直接使用，无需大幅修改

#### 旅程3：长期进化验证
1. 处理与之前类似的任务
2. AI 分身自动应用之前学到的偏好和模式
3. 生成更精准符合期望的结果
4. 通过 Web 仪表板查看学习进化轨迹

**关键时刻**: AI 分身展现出明显的个性化学习效果

---

## 5. MVP 范围界定

### 5.1 MVP 核心边界 (4天实施)

#### 必须包含 (MVP 最小可行)
- **基础 Agent CLI 编排**: Claude Code + OpenCode 集成
- **Soul 注入机制**: profile.md 提示词注入
- **任务调度系统**: `ai-as-me task add/list` 命令
- **简单养蛊循环**: 基础反思和规则积累
- **本地文件存储**: 任务状态和 Soul 数据管理

### 5.2 功能优先级矩阵

| 功能模块 | MVP (P0) | v2.1 (P1) | v2.2 (P2) |
|---------|----------|-----------|-----------|
| Agent CLI 编排 | ✓ 2个工具 | 4个工具 | 全部工具 |
| Soul 注入 | ✓ 基础模板 | 动态模板 | 智能优化 |
| 任务调度 | ✓ 串行执行 | 并行执行 | 智能调度 |
| 养蛊循环 | ✓ 简单反思 | 深度学习 | 自动优化 |
| Web 仪表板 | - | ✓ 基础界面 | 高级功能 |
| Agentic RAG | - | ✓ 基础检索 | 智能推荐 |

---

## 6. 功能需求详细定义

### 6.1 核心编排能力 (P0 - MVP)

#### FR-01: Agent CLI 工具集成
- **能力**: 系统能够调用外部 Agent CLI 工具执行任务
- **具体功能**:
  - 支持 Claude Code (`npx -y @anthropic-ai/claude-code@2.0.76`)
  - 支持 OpenCode (`npx -y opencode-ai@1.1.3`)
  - 工具可用性检测和健康检查
- **验收标准**: 能够成功调用并获取工具执行结果

#### FR-02: Soul 注入机制
- **能力**: 系统能够将个人化上下文注入到外部工具
- **具体功能**:
  - 读取 `soul/profile.md` 个人档案
  - 读取 `soul/rules.md` 工作规则
  - 构建个性化提示词模板
  - 将 Soul 上下文传递给外部工具
- **验收标准**: 外部工具输出体现个人化特征

#### FR-03: 任务生命周期管理
- **能力**: 系统能够管理任务从创建到完成的全流程
- **具体功能**:
  - `ai-as-me task add "description"` - 创建新任务
  - `ai-as-me task list --status todo` - 查看任务列表
  - 任务状态跟踪 (todo → doing → done)
- **验收标准**: 完整的任务生命周期可追踪

#### FR-04: 基础养蛊循环
- **能力**: 系统能够从执行结果中学习和改进
- **具体功能**:
  - 收集任务执行结果和用户反馈
  - 提取成功/失败模式
  - 更新 `soul/rules.md` 规则文件
- **验收标准**: 规则文件随使用逐步丰富

### 6.2 增强功能 (P1 - v2.1)

#### FR-05: 多工具智能选择
- **能力**: 系统能够根据任务特征选择最适合的工具
- **验收标准**: 工具选择准确率 >80%

#### FR-06: Web 仪表板
- **能力**: 提供可视化的任务管理和系统监控界面
- **验收标准**: 基础 Web 界面可用

#### FR-07: Agentic RAG 检索
- **能力**: 系统能够检索和利用历史经验
- **验收标准**: 检索准确率 >85%

---

## 7. 非功能需求

### 7.1 性能需求
- **Agent CLI 调用**: 单次工具调用响应时间 <30秒
- **任务创建**: CLI 命令响应时间 <2秒
- **Soul 注入**: 提示词构建和注入时间 <5秒

### 7.2 可靠性需求
- **目标可用性**: >95% (MVP 阶段个人使用)
- **故障恢复**: 外部工具失败时 <10秒内切换备用方案
- **数据持久性**: Soul 数据和任务历史 100% 持久化

### 7.3 安全需求
- **本地存储**: 所有 Soul 数据仅本地存储，不上传云端
- **API 密钥**: 环境变量存储，不在代码中硬编码
- **权限控制**: Soul 文件权限 600 (仅用户可读写)

### 7.4 可用性需求
- **安装简便**: `pip install ai-as-me` 一键安装
- **配置简单**: 5分钟内完成基础配置
- **命令直观**: CLI 命令符合 Unix 惯例，支持 `--help`

### 7.5 兼容性需求
- **操作系统**: Linux (主要), macOS (支持), Windows (基础)
- **Python 版本**: Python 3.9+
- **Node.js 依赖**: Node.js 16+ (npx 工具调用)

---

## 8. 领域特定约束

### 8.1 编排系统约束
- **外部工具依赖**: 确保目标环境支持 Node.js 和 npx
- **版本兼容性**: 外部工具版本更新时的向后兼容
- **提示词限制**: 不同 Agent CLI 的 context window 限制
- **进程管理**: 外部工具调用的超时和错误处理

### 8.2 MVP 阶段简化策略
- **工具集合限制**: 仅集成 Claude Code 和 OpenCode 两个工具
- **串行执行**: 避免并发复杂性，任务串行处理
- **固定模板**: 使用预定义的提示词模板
- **手动配置**: 暂不实现自动工具选择

### 8.3 技术风险缓解
- **本地缓存**: 缓存常用工具版本，减少网络依赖
- **降级机制**: 主工具失败时切换到备用工具
- **健康检查**: 定期验证外部工具可用性

---

## 9. 实施计划

### 9.1 MVP 成功标准
- **技术标准**: 2个 Agent CLI 稳定集成，Soul 注入正常工作
- **用户标准**: Jody 个人使用满意度 >75%，愿意持续使用
- **产品标准**: 核心工作流程完整，基础自进化机制运行

### 9.2 失败快速识别
- **技术失败**: Agent CLI 调用失败率 >20%
- **用户失败**: 连续 3天不使用或满意度 <50%
- **产品失败**: 无法完成基本任务或无学习效果

### 9.3 设计原则
- **不造轮子，只做编排**: 编排现有工具而非重新构建
- **Soul 注入 + BMAD 技能扩展**: 动态能力扩展
- **养蛊自进化**: 核心差异化优势

---

*注：当前为 MVP 阶段，以 Jody 个人使用验证为主，后续扩展到更广泛用户群体时将调整指标体系和功能范围。*
