---
stepsCompleted: [1, 2, 3, 4, 5]
inputDocuments:
  - '_bmad-output/planning-artifacts/prd-v3.1.md'
  - '_bmad-output/planning-artifacts/ux-design-specification-v3.1.md'
  - '_bmad-output/planning-artifacts/product-brief-AI-as-Me-v3.1-2026-01-15.md'
version: 'v3.1'
status: 'complete'
completedAt: '2026-01-15'
---

# Architecture Document - AI-as-Me v3.1

**Author:** Jody  
**Date:** 2026-01-15  
**Version:** v3.1

---

## Executive Summary

AI-as-Me v3.1 åœ¨ v3.0 è¿›åŒ–å¼•æ“åŸºç¡€ä¸Šï¼Œæ–°å¢ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šDemo æ¨¡å—ã€å†²çªæ£€æµ‹æ¨¡å—ã€ç»Ÿè®¡å¢å¼ºæ¨¡å—ã€‚æ¶æ„éµå¾ªæ¨¡å—åŒ–è®¾è®¡ï¼Œæœ€å°åŒ–å¯¹ç°æœ‰ç³»ç»Ÿçš„å½±å“ã€‚

**å…³é”®æ¶æ„å†³ç­–ï¼š**
1. å¤ç”¨ v3.0 è¿›åŒ–å¼•æ“ï¼Œä¸é‡æ„æ ¸å¿ƒé€»è¾‘
2. æ–°å¢æ¨¡å—ç‹¬ç«‹å®ç°ï¼Œé€šè¿‡æ¥å£é›†æˆ
3. Dashboard å¢é‡æ›´æ–°ï¼Œä¸é‡å†™å‰ç«¯
4. ä¿æŒå‘åå…¼å®¹

---

## System Architecture

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Web Dashboard                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Task UI  â”‚  â”‚ Demo UI  â”‚  â”‚ Evolution Stats  â”‚     â”‚
â”‚  â”‚ (v3.0)   â”‚  â”‚ (v3.1ğŸ†•) â”‚  â”‚ (v3.1 Enhanced)  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Task API â”‚  â”‚ Demo API â”‚  â”‚ Stats API        â”‚     â”‚
â”‚  â”‚ (v3.0)   â”‚  â”‚ (v3.1ğŸ†•) â”‚  â”‚ (v3.1 Enhanced)  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Core Modules                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         Evolution Engine (v3.0)              â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚      â”‚
â”‚  â”‚  â”‚Collectâ”‚ â”‚Recog â”‚ â”‚Gener â”‚ â”‚Write â”‚       â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Demo Module  â”‚  â”‚ Conflict     â”‚  â”‚ Stats        â”‚â”‚
â”‚  â”‚ (v3.1ğŸ†•)     â”‚  â”‚ Detector     â”‚  â”‚ Calculator   â”‚â”‚
â”‚  â”‚              â”‚  â”‚ (v3.1ğŸ†•)     â”‚  â”‚ (v3.1ğŸ†•)     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Data Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Soul     â”‚  â”‚Experienceâ”‚  â”‚ Logs             â”‚     â”‚
â”‚  â”‚ (rules/) â”‚  â”‚ (JSON)   â”‚  â”‚ (JSONL)          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Module Design

### 1. Demo Module (v3.1 æ–°å¢)

**èŒè´£ï¼š** æ‰§è¡Œé¦–æ¬¡è¿›åŒ–ç¤ºä¾‹ï¼Œå¼•å¯¼æ–°ç”¨æˆ·

**ç»„ä»¶ï¼š**
```python
src/ai_as_me/demo/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ first_evolution.py      # ä¸»å…¥å£
â”œâ”€â”€ sample_task.py          # ç¤ºä¾‹ä»»åŠ¡
â””â”€â”€ progress_tracker.py     # è¿›åº¦è¿½è¸ª
```

**å…³é”®æ¥å£ï¼š**
```python
class FirstEvolutionDemo:
    def run(self) -> DemoResult:
        """æ‰§è¡Œå®Œæ•´ Demo æµç¨‹"""
        
    def _execute_sample_task(self) -> TaskResult:
        """æ‰§è¡Œç¤ºä¾‹ä»»åŠ¡ï¼šæ£€æŸ¥ requirements.txt"""
        
    def _show_progress(self, step: int, total: int):
        """æ˜¾ç¤ºè¿›åº¦"""
```

**é›†æˆç‚¹ï¼š**
- CLI: `ai-as-me demo first-evolution`
- Web: `/api/demo/start` endpoint
- è°ƒç”¨ Evolution Engine çš„ç°æœ‰æ¥å£

---

### 2. Conflict Detector Module (v3.1 æ–°å¢)

**èŒè´£ï¼š** æ£€æµ‹ core rules ä¸ learned rules çš„å†²çª

**ç»„ä»¶ï¼š**
```python
src/ai_as_me/soul/
â”œâ”€â”€ conflict_detector.py    # ğŸ†• å†²çªæ£€æµ‹å™¨
â”œâ”€â”€ conflict_resolver.py    # ğŸ†• å†²çªå¤„ç†å™¨
â””â”€â”€ loader.py               # (v3.0 å·²æœ‰)
```

**å…³é”®æ¥å£ï¼š**
```python
class ConflictDetector:
    def scan(self) -> List[Conflict]:
        """æ‰«ææ‰€æœ‰è§„åˆ™ï¼Œè¿”å›å†²çªåˆ—è¡¨"""
        
    def detect_contradiction(self, core_rule, learned_rule) -> bool:
        """æ£€æµ‹ç›´æ¥çŸ›ç›¾"""
        
    def detect_priority_override(self, core_rule, learned_rule) -> bool:
        """æ£€æµ‹ä¼˜å…ˆçº§è¦†ç›–"""

class ConflictResolver:
    def auto_resolve(self, conflict: Conflict) -> Resolution:
        """è‡ªåŠ¨å¤„ç†å†²çªï¼šé™çº§ learned rule"""
        
    def log_conflict(self, conflict: Conflict):
        """è®°å½•åˆ° logs/rule-conflicts.jsonl"""
```

**é›†æˆç‚¹ï¼š**
- å¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æ
- CLI: `ai-as-me soul check-conflicts`
- Web: `/api/soul/conflicts` endpoint

---

### 3. Stats Calculator Module (v3.1 æ–°å¢)

**èŒè´£ï¼š** è®¡ç®—å¢å¼ºçš„è¿›åŒ–ç»Ÿè®¡

**ç»„ä»¶ï¼š**
```python
src/ai_as_me/stats/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ calculator.py           # ğŸ†• ç»Ÿè®¡è®¡ç®—å™¨
â”œâ”€â”€ visualizer.py           # ğŸ†• å¯è§†åŒ–ç”Ÿæˆå™¨
â””â”€â”€ models.py               # ğŸ†• æ•°æ®æ¨¡å‹
```

**å…³é”®æ¥å£ï¼š**
```python
class StatsCalculator:
    def calculate_application_frequency(self) -> Dict[str, float]:
        """è®¡ç®—è§„åˆ™åº”ç”¨é¢‘ç‡"""
        
    def calculate_effectiveness_score(self, rule_id: str) -> float:
        """è®¡ç®—è§„åˆ™æœ‰æ•ˆæ€§è¯„åˆ†"""
        
    def calculate_pattern_accuracy(self) -> float:
        """è®¡ç®—æ¨¡å¼è¯†åˆ«å‡†ç¡®ç‡"""

class StatsVisualizer:
    def generate_heatmap(self, data: Dict) -> ChartData:
        """ç”Ÿæˆåº”ç”¨çƒ­åŠ›å›¾"""
        
    def generate_trend_chart(self, data: List) -> ChartData:
        """ç”Ÿæˆæœ‰æ•ˆæ€§è¶‹åŠ¿å›¾"""
```

**é›†æˆç‚¹ï¼š**
- CLI: `ai-as-me evolve stats --detailed`
- Web: `/api/evolution/stats` endpoint
- Dashboard æ–°å¢å›¾è¡¨ç»„ä»¶

---

## Data Architecture

### Data Flow

```
ç”¨æˆ·æ“ä½œ â†’ Task Execution â†’ Experience Collection
                                    â†“
                            experience/successes/
                            experience/failures/
                                    â†“
                            Pattern Recognition
                                    â†“
                            experience/patterns/
                                    â†“
                            Rule Generation
                                    â†“
                            soul/rules/learned/
                                    â†“
                            Conflict Detection ğŸ†•
                                    â†“
                            logs/rule-conflicts.jsonl ğŸ†•
                                    â†“
                            Stats Calculation ğŸ†•
                                    â†“
                            Dashboard Visualization ğŸ†•
```

### New Data Structures

**å†²çªæ—¥å¿—æ ¼å¼ï¼š**
```json
{
  "timestamp": "2026-01-15T20:00:00Z",
  "conflict_type": "contradiction",
  "core_rule": "soul/rules/core/base.md#rule-1",
  "learned_rule": "soul/rules/learned/tool-pref.md#rule-3",
  "resolution": "downgrade_learned",
  "auto_resolved": true
}
```

**ç»Ÿè®¡æ•°æ®æ ¼å¼ï¼š**
```json
{
  "rule_id": "python-dependency-check",
  "application_count": 45,
  "application_frequency": 3.2,
  "effectiveness_score": 0.18,
  "last_applied": "2026-01-15T19:30:00Z"
}
```

---

## API Design

### New Endpoints (v3.1)

**Demo API:**
```
POST /api/demo/start
  â†’ å¯åŠ¨é¦–æ¬¡è¿›åŒ– Demo
  â† { demo_id, status, progress }

GET /api/demo/{demo_id}/progress
  â†’ æŸ¥è¯¢ Demo è¿›åº¦
  â† { step, total, current_action, percentage }

GET /api/demo/{demo_id}/result
  â†’ è·å– Demo ç»“æœ
  â† { success, generated_rule, file_path }
```

**Conflict API:**
```
GET /api/soul/conflicts
  â†’ è·å–æ‰€æœ‰å†²çª
  â† { conflicts: [...], count }

POST /api/soul/conflicts/{id}/resolve
  â†’ å¤„ç†å†²çª
  â† { resolution, success }
```

**Stats API (Enhanced):**
```
GET /api/evolution/stats?detailed=true
  â†’ è·å–è¯¦ç»†ç»Ÿè®¡
  â† { rules, frequencies, effectiveness, accuracy }

GET /api/evolution/stats/rule/{rule_id}
  â†’ è·å–å•æ¡è§„åˆ™ç»Ÿè®¡
  â† { rule_id, stats, history }
```

---

## Technology Stack

### Backend (Python)

**ç°æœ‰ï¼ˆv3.0ï¼‰ï¼š**
- FastAPI - Web æ¡†æ¶
- Pydantic - æ•°æ®éªŒè¯
- SQLite - ä»»åŠ¡æ•°æ®åº“

**æ–°å¢ï¼ˆv3.1ï¼‰ï¼š**
- æ— æ–°ä¾èµ–ï¼Œå¤ç”¨ç°æœ‰æŠ€æœ¯æ ˆ

### Frontend (React)

**ç°æœ‰ï¼ˆv3.0ï¼‰ï¼š**
- React 18 + TypeScript
- Tailwind CSS + shadcn/ui
- Zustand - çŠ¶æ€ç®¡ç†
- React Query - æ•°æ®è·å–

**æ–°å¢ï¼ˆv3.1ï¼‰ï¼š**
- Recharts - å›¾è¡¨åº“ï¼ˆç”¨äºçƒ­åŠ›å›¾å’Œè¶‹åŠ¿å›¾ï¼‰

---

## Deployment Architecture

### éƒ¨ç½²æ¨¡å‹ï¼ˆä¸å˜ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User's Machine              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI-as-Me Process            â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Backend (FastAPI)       â”‚   â”‚
â”‚  â”‚  â””â”€â”€ Frontend (React SPA)    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  File System                 â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ soul/                   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ experience/             â”‚   â”‚
â”‚  â”‚  â””â”€â”€ logs/                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¿é—®æ–¹å¼ï¼š**
- Web: http://localhost:8080
- CLI: `ai-as-me` å‘½ä»¤

---

## Security Considerations

### v3.1 æ–°å¢å®‰å…¨è€ƒè™‘

**å†²çªæ£€æµ‹å®‰å…¨ï¼š**
- Core rules å§‹ç»ˆä¼˜å…ˆäº learned rules
- è‡ªåŠ¨é™çº§æœºåˆ¶é˜²æ­¢ learned rules è¦†ç›–å…³é”®å®‰å…¨è§„åˆ™
- æ‰€æœ‰å†²çªå¤„ç†è®°å½•æ—¥å¿—ï¼Œå¯å®¡è®¡

**Demo å®‰å…¨ï¼š**
- Demo ä»»åŠ¡åœ¨æ²™ç®±ç¯å¢ƒæ‰§è¡Œ
- ä¸è®¿é—®æ•æ„Ÿæ–‡ä»¶
- ç”Ÿæˆçš„è§„åˆ™ç»è¿‡éªŒè¯

---

## Performance Requirements

### v3.1 æ€§èƒ½ç›®æ ‡

| æ“ä½œ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|------|------|----------|
| Demo å®Œæˆæ—¶é—´ | <8 åˆ†é’Ÿ | ç«¯åˆ°ç«¯è®¡æ—¶ |
| å†²çªæ£€æµ‹ | <2 ç§’ | æ‰«ææ‰€æœ‰è§„åˆ™ |
| ç»Ÿè®¡æŸ¥è¯¢ | <1 ç§’ | API å“åº”æ—¶é—´ |
| Dashboard åŠ è½½ | <2 ç§’ | é¦–å±æ¸²æŸ“ |
| å›¾è¡¨æ¸²æŸ“ | <500ms | äº¤äº’å“åº” |

---

## Testing Strategy

### æµ‹è¯•å±‚æ¬¡

**å•å…ƒæµ‹è¯•ï¼š**
- `test_demo_module.py` - Demo æ¨¡å—
- `test_conflict_detector.py` - å†²çªæ£€æµ‹
- `test_stats_calculator.py` - ç»Ÿè®¡è®¡ç®—

**é›†æˆæµ‹è¯•ï¼š**
- `test_demo_flow.py` - å®Œæ•´ Demo æµç¨‹
- `test_conflict_resolution.py` - å†²çªæ£€æµ‹å’Œå¤„ç†
- `test_stats_pipeline.py` - ç»Ÿè®¡æ•°æ®æµ

**E2E æµ‹è¯•ï¼š**
- `test_first_evolution_ux.py` - é¦–æ¬¡è¿›åŒ–ç”¨æˆ·ä½“éªŒ
- `test_conflict_ui.py` - å†²çªæ£€æµ‹ç•Œé¢
- `test_stats_dashboard.py` - ç»Ÿè®¡ Dashboard

---

## Migration Strategy

### ä» v3.0 å‡çº§åˆ° v3.1

**æ•°æ®è¿ç§»ï¼š**
- æ— éœ€æ•°æ®è¿ç§»
- æ–°å¢æ—¥å¿—æ–‡ä»¶è‡ªåŠ¨åˆ›å»º

**ä»£ç è¿ç§»ï¼š**
- æ–°å¢æ¨¡å—ï¼Œä¸ä¿®æ”¹ç°æœ‰ä»£ç 
- å‘åå…¼å®¹ v3.0 API

**ç”¨æˆ·è¿ç§»ï¼š**
- è‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬
- é¦–æ¬¡å¯åŠ¨æ˜¾ç¤º v3.1 æ–°åŠŸèƒ½å¼•å¯¼

---

## Future Considerations

### v3.2+ æ¶æ„æ¼”è¿›

**çµæ„Ÿæ± æœºåˆ¶ï¼ˆv3.2ï¼‰ï¼š**
- æ–°å¢ `exploration/` æ¨¡å—
- åå°ä»»åŠ¡è°ƒåº¦å™¨

**è§„åˆ™ç‰ˆæœ¬ç®¡ç†ï¼ˆv3.3ï¼‰ï¼š**
- Git-like ç‰ˆæœ¬æ§åˆ¶
- è§„åˆ™å›æ»šæœºåˆ¶

**å¤š Agent åä½œï¼ˆv4.0ï¼‰ï¼š**
- Agent é€šä¿¡åè®®
- åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦

---

## Appendix

### Key Architectural Decisions

**AD-1: å¤ç”¨ v3.0 è¿›åŒ–å¼•æ“**
- ç†ç”±ï¼šæ ¸å¿ƒé€»è¾‘ç¨³å®šï¼Œæ— éœ€é‡æ„
- å½±å“ï¼šå¼€å‘é€Ÿåº¦å¿«ï¼Œé£é™©ä½

**AD-2: æ¨¡å—åŒ–æ–°å¢åŠŸèƒ½**
- ç†ç”±ï¼šæœ€å°åŒ–å¯¹ç°æœ‰ç³»ç»Ÿçš„å½±å“
- å½±å“ï¼šæ˜“äºæµ‹è¯•å’Œç»´æŠ¤

**AD-3: Dashboard å¢é‡æ›´æ–°**
- ç†ç”±ï¼šé¿å…å‰ç«¯é‡å†™
- å½±å“ï¼šä¿æŒç”¨æˆ·ä½“éªŒè¿ç»­æ€§

**AD-4: Core rules ä¼˜å…ˆçº§**
- ç†ç”±ï¼šç¡®ä¿ç³»ç»Ÿå®‰å…¨å¯æ§
- å½±å“ï¼šlearned rules ä¸èƒ½è¦†ç›–å…³é”®è§„åˆ™

---

## Error Handling Strategy

### é”™è¯¯åˆ†ç±»

| çº§åˆ« | ç±»å‹ | å¤„ç†æ–¹å¼ | ç”¨æˆ·æç¤º |
|------|------|----------|----------|
| **Critical** | ç³»ç»Ÿå´©æºƒ | è‡ªåŠ¨é‡å¯ + æ—¥å¿— | æ˜¾ç¤ºé”™è¯¯é¡µé¢ |
| **Error** | åŠŸèƒ½å¤±è´¥ | é‡è¯• + é™çº§ | æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ |
| **Warning** | éƒ¨åˆ†å¤±è´¥ | ç»§ç»­æ‰§è¡Œ | æ˜¾ç¤ºè­¦å‘Š |
| **Info** | é¢„æœŸå¼‚å¸¸ | æ­£å¸¸å¤„ç† | é™é»˜æˆ–æç¤º |

### Demo æ¨¡å—é”™è¯¯å¤„ç†

```python
class DemoErrorHandler:
    def handle_task_failure(self, error):
        """ç¤ºä¾‹ä»»åŠ¡æ‰§è¡Œå¤±è´¥"""
        # 1. è®°å½•é”™è¯¯æ—¥å¿—
        # 2. æ˜¾ç¤ºå‹å¥½é”™è¯¯æ¶ˆæ¯
        # 3. æä¾›é‡è¯•é€‰é¡¹
        # 4. æä¾›è·³è¿‡é€‰é¡¹ï¼ˆé™çº§ï¼‰
        
    def handle_llm_timeout(self, error):
        """LLM è°ƒç”¨è¶…æ—¶"""
        # 1. é‡è¯• 3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿
        # 2. è¶…æ—¶åä½¿ç”¨æœ¬åœ°è§„åˆ™æ¨¡æ¿
        # 3. æç¤ºç”¨æˆ·æ£€æŸ¥ç½‘ç»œ
```

### å†²çªæ£€æµ‹é”™è¯¯å¤„ç†

```python
class ConflictDetectorErrorHandler:
    def handle_parse_error(self, file_path, error):
        """è§„åˆ™æ–‡ä»¶è§£æå¤±è´¥"""
        # 1. è·³è¿‡æŸåæ–‡ä»¶
        # 2. è®°å½•åˆ°é”™è¯¯æ—¥å¿—
        # 3. ç»§ç»­æ£€æµ‹å…¶ä»–æ–‡ä»¶
        # 4. æœ€ç»ˆæŠ¥å‘Šä¸­æ ‡è®°è·³è¿‡çš„æ–‡ä»¶
        
    def handle_scan_timeout(self, error):
        """æ‰«æè¶…æ—¶"""
        # 1. è¿”å›å·²æ‰«æçš„ç»“æœ
        # 2. æ ‡è®°æœªå®Œæˆ
        # 3. å»ºè®®ç”¨æˆ·å‡å°‘è§„åˆ™æ•°é‡
```

### ç»Ÿè®¡æ¨¡å—é”™è¯¯å¤„ç†

```python
class StatsErrorHandler:
    def handle_log_corruption(self, error):
        """æ—¥å¿—æ–‡ä»¶æŸå"""
        # 1. å°è¯•ä¿®å¤ï¼ˆè·³è¿‡æŸåè¡Œï¼‰
        # 2. é‡å»ºç´¢å¼•
        # 3. è¿”å›éƒ¨åˆ†æ•°æ®
        # 4. æç¤ºç”¨æˆ·æ•°æ®å¯èƒ½ä¸å®Œæ•´
        
    def handle_calculation_error(self, error):
        """è®¡ç®—é”™è¯¯ï¼ˆé™¤é›¶ç­‰ï¼‰"""
        # 1. è¿”å›é»˜è®¤å€¼ï¼ˆ0 æˆ– N/Aï¼‰
        # 2. è®°å½•è­¦å‘Šæ—¥å¿—
        # 3. ä¸å½±å“å…¶ä»–ç»Ÿè®¡
```

### å…¨å±€é”™è¯¯å¤„ç†

**API å±‚ï¼š**
```python
@app.exception_handler(Exception)
async def global_exception_handler(request, exc):
    # 1. è®°å½•å®Œæ•´å †æ ˆ
    # 2. è¿”å›å‹å¥½é”™è¯¯å“åº”
    # 3. ä¸æš´éœ²å†…éƒ¨ç»†èŠ‚
    return JSONResponse(
        status_code=500,
        content={"error": "Internal error", "request_id": uuid4()}
    )
```

**å‰ç«¯å±‚ï¼š**
```typescript
// Error Boundary
class ErrorBoundary extends React.Component {
  componentDidCatch(error, errorInfo) {
    // 1. è®°å½•åˆ°é”™è¯¯è¿½è¸ªæœåŠ¡
    // 2. æ˜¾ç¤ºå‹å¥½é”™è¯¯é¡µé¢
    // 3. æä¾›åˆ·æ–°/è¿”å›é€‰é¡¹
  }
}
```

### é”™è¯¯æ¢å¤ç­–ç•¥

| åœºæ™¯ | æ¢å¤ç­–ç•¥ |
|------|----------|
| Demo ä¸­æ–­ | ä¿å­˜è¿›åº¦ï¼Œæ”¯æŒæ–­ç‚¹ç»­ä¼  |
| å†²çªæ£€æµ‹å¤±è´¥ | è¿”å›éƒ¨åˆ†ç»“æœï¼Œæ ‡è®°æœªå®Œæˆ |
| ç»Ÿè®¡æ•°æ®ä¸¢å¤± | ä»æ—¥å¿—é‡å»ºï¼Œæç¤ºæ•°æ®èŒƒå›´ |
| API è¶…æ—¶ | é‡è¯• 3 æ¬¡ï¼Œæœ€ç»ˆè¿”å›ç¼“å­˜æ•°æ® |
| å‰ç«¯å´©æºƒ | Error Boundary æ•è·ï¼Œæ˜¾ç¤ºæ¢å¤é¡µé¢ |
